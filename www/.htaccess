# Apache Rewrite 엔진 활성화
<IfModule mod_rewrite.c>
    RewriteEngine On

    # HTTPS 강제 리다이렉트 (선택사항, 필요시 주석 해제)
    # RewriteCond %{HTTPS} off
    # RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

    # www 제거 또는 추가 (선택사항, 필요시 주석 해제)
    # RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
    # RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1 [R=301,L]

    # 요청이 실제 파일이나 디렉토리가 아닌 경우 index.php로 라우팅
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>

# 디렉토리 인덱싱 비활성화
Options -Indexes

# 기본 문서 설정
DirectoryIndex index.php index.html

# PHP 설정
<IfModule mod_php7.c>
    php_flag display_errors Off
    php_flag log_errors On
    php_value upload_max_filesize 20M
    php_value post_max_size 20M
    php_value max_execution_time 300
    php_value max_input_time 300
</IfModule>

# 민감한 파일 접근 제한
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# 환경설정 파일 접근 차단
<FilesMatch "\.(env|ini|log|sh|sql)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# 인코딩 설정
AddDefaultCharset UTF-8
